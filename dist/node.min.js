var instance={};instance.add=function(a,b,c){instance.zip(a,b,c,function(a,b){return a+b})},instance.subtract=function(a,b,c){instance.zip(a,b,c,function(a,b){return a-b})},instance.multiply=function(a,b,c){instance.zip(a,b,c,function(a,b){return a*b})},instance.divide=function(a,b,c){instance.zip(a,b,c,function(a,b){return a/b})},instance.dot=function(a,b){return instance.zipFold(a,b,function(a,b){return a*b},function(a,b){return a+b})},instance.cross=function(a,b,c){var d,e,f;a instanceof Array?(d=a[0],e=a[1],f=a[2]):(d=a,e=a,f=a);var g,h,i;b instanceof Array?(g=b[0],h=b[1],i=b[2]):(g=b,h=b,i=b),c[0]=e*i-f*h,c[1]=f*g-d*i,c[2]=d*h-e*g},instance.reflect=function(a,b,c){var d=2*instance.dot(a,b);instance.zip(a,b,c,function(a,b){return a-b*d})},instance.sum=function(a){return instance.fold(a,function(a,b){return a+b})},instance.product=function(a){return instance.fold(a,function(a,b){return a*b})},instance.map=function(a,b,c){if(a instanceof Array)for(var d=0;d<a.length;d++)b[d]=c(a[d]);else b[0]=c(a)},instance.zip=function(a,b,c,d){if(a instanceof Array)if(b instanceof Array)for(var e=0;e<a.length;e++)c[e]=d(a[e],b[e]);else for(var e=0;e<a.length;e++)c[e]=d(a[e],b);else if(b instanceof Array)for(var e=0;e<b.length;e++)c[e]=d(a,b[e]);else c[0]=d(a,b)},instance.fold=function(a,b){if(a instanceof Array){for(var c=a[0],d=1;d<a.length;d++)c=b(c,a[d]);return c}return a},instance.zipFold=function(a,b,c,d){if(a instanceof Array){if(b instanceof Array){for(var e=c(a[0],b[0]),f=1;f<a.length;f++)e=d(e,c(a[f],b[f]));return e}for(var e=c(a[0],b),f=1;f<a.length;f++)e=d(e,c(a[f],b));return e}if(b instanceof Array){for(var e=c(a,b[0]),f=1;f<b.length;f++)e=d(e,c(a,b[f]));return e}return c(a,b)},instance.magnitudeSquared=function(a){return instance.dot(a,a)},instance.magnitude=function(a){return Math.sqrt(instance.magnitudeSquared(a))},instance.distanceSquared=function(a,b){return instance.zipFold(a,b,function(a,b){var c=a-b;return c*c},function(a,b){return a+b})},instance.distance=function(a,b){return Math.sqrt(instance.distanceSquared(a,b))},instance.clone=function(a,b){instance.map(a,b,function(a){return a})},instance.negate=function(a,b){instance.map(a,b,function(a){return-a})},module.exports=instance;